{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\doubl\\\\Documents\\\\Projets\\\\Try\\\\rocketbuilder\\\\frontend\\\\src\\\\components\\\\controls\\\\ManoeuvreControl.js\";\nimport React from 'react';\nimport { updateShip } from '../../utils/updateShip';\nimport { ShipContext } from '../../contexts/ShipProvider';\n\nconst ManoeuvreControl = () => {\n  const fromSurfaceToOrbit = () => {\n    let stage = this.context.state.stage;\n    let requierdDV = Math.sqrt(this.state.ship.celest_body.mu / this.state.ship.celest_body.radius) * 1000 * this.state.ship.celest_body.atmosphere;\n    let dvByStageAfterBurn = [...this.context.state.deltaVByStage];\n    let dvbystage = [...this.context.state.deltaVByStage];\n    let dif = [];\n    console.log('reqDV', requierdDV); // Minus deltaV\n\n    for (let i = 0; i < dvByStageAfterBurn.length; i++) {\n      if (dvByStageAfterBurn[i] > requierdDV) {\n        dvByStageAfterBurn[i] -= requierdDV;\n        requierdDV = 0;\n        console.log('Congratulation, you reach orbit');\n      } else {\n        requierdDV -= dvByStageAfterBurn[i];\n        dvByStageAfterBurn[i] = 0;\n      }\n    }\n\n    if (requierdDV !== 0) {\n      console.log('you failed');\n      return;\n    }\n\n    console.log('dvbystage', dvbystage);\n    console.log('dvByStageAfterBurn', dvByStageAfterBurn); // stage separation\n\n    for (let i = 0; i < dvByStageAfterBurn.length; i++) {\n      if (dvByStageAfterBurn[i] === 0) {\n        stage.splice(0, 1);\n        dvByStageAfterBurn.splice(0, 1);\n        dvbystage.splice(0, 1);\n      }\n    } // getDv % diference\n\n\n    for (let i = 0; i < dvbystage.length; i++) {\n      dif.push(dvByStageAfterBurn[i] / (dvbystage[i] / 100));\n    }\n\n    console.log('dif', dif); // updateFuelLastStage\n\n    for (let i = 0; i < stage[0].tank.length; i++) {\n      stage[0].tank[i].remainingFuel = stage[0].tank[i].remainingFuel / 100 * dif[0] / 1.5;\n    } //stage update\n\n\n    this.context.shipSetStage(stage);\n    this.context.updateLocation('orbit');\n    updateShip(stage, this.state.ship.name, 'orbit', this.state.ship.celest_body.id, this.state.ship.id);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"manoeuvre__Control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => fromSurfaceToOrbit(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }, \"go to orbit :\"));\n};\n\nManoeuvreControl.contextType = ShipContext;\nexport default ManoeuvreControl;","map":{"version":3,"sources":["C:/Users/doubl/Documents/Projets/Try/rocketbuilder/frontend/src/components/controls/ManoeuvreControl.js"],"names":["React","updateShip","ShipContext","ManoeuvreControl","fromSurfaceToOrbit","stage","context","state","requierdDV","Math","sqrt","ship","celest_body","mu","radius","atmosphere","dvByStageAfterBurn","deltaVByStage","dvbystage","dif","console","log","i","length","splice","push","tank","remainingFuel","shipSetStage","updateLocation","name","id","contextType"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {updateShip} from '../../utils/updateShip'\r\nimport { ShipContext } from '../../contexts/ShipProvider'\r\n\r\nconst ManoeuvreControl = () => {\r\n\r\n    const fromSurfaceToOrbit = () => {\r\n        let stage = this.context.state.stage\r\n        let requierdDV = Math.sqrt(this.state.ship.celest_body.mu / this.state.ship.celest_body.radius) * 1000 * this.state.ship.celest_body.atmosphere\r\n        let dvByStageAfterBurn = [...this.context.state.deltaVByStage]\r\n        let dvbystage = [...this.context.state.deltaVByStage]\r\n        let dif = []\r\n        console.log('reqDV', requierdDV);\r\n        // Minus deltaV\r\n        for (let i = 0; i < dvByStageAfterBurn.length; i++) {\r\n            if (dvByStageAfterBurn[i] > requierdDV) {\r\n                dvByStageAfterBurn[i] -= requierdDV\r\n                requierdDV = 0\r\n                console.log('Congratulation, you reach orbit')\r\n            } else {\r\n                requierdDV -= dvByStageAfterBurn[i]\r\n                dvByStageAfterBurn[i] = 0\r\n            }\r\n        }\r\n        if (requierdDV !== 0) {\r\n            console.log('you failed')\r\n            return\r\n        }\r\n        console.log('dvbystage', dvbystage);\r\n        console.log('dvByStageAfterBurn', dvByStageAfterBurn);\r\n        // stage separation\r\n        for (let i = 0; i < dvByStageAfterBurn.length; i++) {\r\n            if (dvByStageAfterBurn[i] === 0) {\r\n                stage.splice(0, 1)\r\n                dvByStageAfterBurn.splice(0, 1)\r\n                dvbystage.splice(0, 1)\r\n            }\r\n        }\r\n        // getDv % diference\r\n        for (let i = 0; i < dvbystage.length; i++) {\r\n            dif.push(dvByStageAfterBurn[i] / (dvbystage[i] / 100))\r\n        }\r\n        console.log('dif', dif);\r\n        // updateFuelLastStage\r\n        for (let i = 0; i < stage[0].tank.length; i++) {\r\n            stage[0].tank[i].remainingFuel = (stage[0].tank[i].remainingFuel / 100 * dif[0]) / 1.5\r\n        }\r\n        //stage update\r\n            this.context.shipSetStage(stage)\r\n            this.context.updateLocation('orbit')\r\n            updateShip(stage, this.state.ship.name , 'orbit' ,this.state.ship.celest_body.id, this.state.ship.id)\r\n    }\r\n\r\n    \r\n    return (\r\n        <div className=\"manoeuvre__Control\">\r\n            <button onClick={() => fromSurfaceToOrbit()}>go to orbit :</button>\r\n        </div>\r\n    );\r\n};\r\n\r\nManoeuvreControl.contextType = ShipContext;\r\n\r\nexport default ManoeuvreControl;"]},"metadata":{},"sourceType":"module"}