{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\doubl\\\\Documents\\\\Projets\\\\Try\\\\rocketbuilder\\\\frontend\\\\src\\\\components\\\\controls\\\\ShipControl.js\";\nimport React, { useEffect } from \"react\";\nimport { ShipContext } from '../../contexts/ShipProvider';\nimport axios from 'axios';\nimport ManoeuvreControl from './ManoeuvreControl';\nimport { func } from \"prop-types\";\n\nconst ShipControl = props => {\n  useEffect(() => {\n    async () => {\n      const shiptRes = await axios({\n        method: 'GET',\n        url: `http://localhost:1337/ships/${props.location.id}`\n      });\n      const fetchedShip = shiptRes.data;\n      let rocketStages = []; // format data for the context\n\n      for (let i = 0; i < fetchedShip.stage.length; i++) {\n        let stage = {\n          commandModule: [],\n          engine: [],\n          tank: []\n        };\n        let currentStage = i;\n\n        for (let i = 0; i < fetchedShip.stage[currentStage].tank.length; i++) {\n          stage.tank.push(fetchedShip.stage[currentStage].tank[i].tank);\n        }\n\n        for (let i = 0; i < fetchedShip.stage[currentStage].engine.length; i++) {\n          stage.engine.push(fetchedShip.stage[currentStage].engine[i].engine);\n        }\n\n        for (let i = 0; i < fetchedShip.stage[currentStage].commandModule.length; i++) {\n          stage.commandModule.push(fetchedShip.stage[currentStage].commandModule[i].commandModule);\n        }\n\n        currentStage++;\n        rocketStages.push(stage);\n      }\n\n      console.log('rocketStages', rocketStages);\n      this.context.shipSetStage(rocketStages);\n      this.context.setShip(fetchedShip);\n      console.log('fetchedShip', fetchedShip); // Catch error\n    };\n\n    if (props.location.id) {\n      try {} catch (err) {\n        alert(err);\n      }\n    } else {\n      // redirect to home\n      window.location.pathname = '/';\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ship__control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ManoeuvreControl // ship={this.context.state.ship}\n  // stage={this.context.state.stage}\n  , {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }));\n};\n\nShipControl.contextType = ShipContext;\nexport default ShipControl;","map":{"version":3,"sources":["C:/Users/doubl/Documents/Projets/Try/rocketbuilder/frontend/src/components/controls/ShipControl.js"],"names":["React","useEffect","ShipContext","axios","ManoeuvreControl","func","ShipControl","props","shiptRes","method","url","location","id","fetchedShip","data","rocketStages","i","stage","length","commandModule","engine","tank","currentStage","push","console","log","context","shipSetStage","setShip","err","alert","window","pathname","contextType"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { ShipContext } from '../../contexts/ShipProvider'\r\nimport axios from 'axios';\r\nimport ManoeuvreControl from './ManoeuvreControl';\r\nimport { func } from \"prop-types\";\r\n\r\nconst ShipControl = (props) => {\r\n\r\n    useEffect( () => {\r\n        async () => {\r\n            const shiptRes = await axios({\r\n                method: 'GET',\r\n                url: `http://localhost:1337/ships/${props.location.id}`\r\n            });\r\n            const fetchedShip = shiptRes.data\r\n            let rocketStages = []\r\n            // format data for the context\r\n            for (let i = 0; i < fetchedShip.stage.length; i++) {\r\n                let stage = {\r\n                    commandModule: [],\r\n                    engine: [],\r\n                    tank: [],\r\n                }\r\n                let currentStage = i\r\n                for (let i = 0; i < fetchedShip.stage[currentStage].tank.length; i++) {\r\n                    stage.tank.push(fetchedShip.stage[currentStage].tank[i].tank)\r\n                }\r\n                for (let i = 0; i < fetchedShip.stage[currentStage].engine.length; i++) {\r\n                    stage.engine.push(fetchedShip.stage[currentStage].engine[i].engine)\r\n                }\r\n                for (let i = 0; i < fetchedShip.stage[currentStage].commandModule.length; i++) {\r\n                    stage.commandModule.push(fetchedShip.stage[currentStage].commandModule[i].commandModule)\r\n                }\r\n                currentStage++\r\n                rocketStages.push(stage)\r\n            }\r\n            console.log('rocketStages', rocketStages);\r\n\r\n            this.context.shipSetStage(rocketStages)\r\n            this.context.setShip(fetchedShip)\r\n\r\n            console.log('fetchedShip', fetchedShip)\r\n            // Catch error\r\n        }\r\n        if (props.location.id) {\r\n            try {\r\n                \r\n            } catch (err) {\r\n                alert(err);\r\n            }\r\n\r\n\r\n        } else {\r\n            // redirect to home\r\n            window.location.pathname = '/'\r\n        }\r\n    })\r\n\r\n    return (\r\n        <div className=\"ship__control\">\r\n            <ManoeuvreControl\r\n            // ship={this.context.state.ship}\r\n            // stage={this.context.state.stage}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nShipControl.contextType = ShipContext;\r\n\r\nexport default ShipControl;"]},"metadata":{},"sourceType":"module"}