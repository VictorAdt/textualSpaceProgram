{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\doubl\\\\Documents\\\\Projets\\\\Try\\\\rocketbuilder\\\\frontend\\\\src\\\\components\\\\builder\\\\SaveShip.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { saveShip } from './../../utils/saveShip';\nexport default class SaveShip extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.saveShip = async e => {\n      e.preventDefault();\n      const stage = this.props.stage;\n      let partList = [];\n\n      for (let i = 0; i < stage.length; i++) {\n        let currentStage = i;\n        let tankList = [];\n        let engineList = [];\n        let commandModuleList = [];\n\n        if (stage[currentStage].tank !== undefined || stage[currentStage].engine !== undefined || stage[currentStage].commandModule !== undefined) {\n          for (let i = 0; i < stage[currentStage].tank.length; i++) {\n            if (stage[currentStage].tank[i] !== undefined) {\n              let id = stage[currentStage].tank[i].id;\n              tankList.push({\n                tank: {\n                  id: id\n                }\n              });\n            }\n          }\n\n          for (let i = 0; i < stage[currentStage].engine.length; i++) {\n            if (stage[currentStage].engine[i] !== undefined) {\n              let id = stage[currentStage].engine[i].id;\n              engineList.push({\n                engine: {\n                  id: id\n                }\n              });\n            }\n          }\n\n          for (let i = 0; i < stage[currentStage].commandModule.length; i++) {\n            if (stage[currentStage].commandModule[i] !== undefined) {\n              let id = stage[currentStage].commandModule[i].id;\n              commandModuleList.push({\n                tank: {\n                  id: id\n                }\n              });\n            }\n          }\n\n          currentStage++;\n          partList.push({\n            tank: tankList,\n            engine: engineList,\n            commandModule: commandModuleList\n          });\n        }\n      }\n\n      const data = {\n        name: this.props.name,\n        user: {\n          id: 1\n        },\n        stage: partList,\n        celest_body: {\n          id: this.props.bodyLocation\n        },\n        locationStatus: this.props.locationStatus\n      };\n      const saveShipRes = await axios({\n        method: 'POST',\n        url: 'http://localhost:1337/ships',\n        data\n      });\n\n      if (saveShipRes.status === 200) {\n        alert('200');\n      }\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => saveShip(this.props.stage, this.props.name, this.props.locationStatus, this.props.bodyLocation),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }\n    }, \" Save \");\n  }\n\n}","map":{"version":3,"sources":["C:/Users/doubl/Documents/Projets/Try/rocketbuilder/frontend/src/components/builder/SaveShip.js"],"names":["React","Component","axios","saveShip","SaveShip","e","preventDefault","stage","props","partList","i","length","currentStage","tankList","engineList","commandModuleList","tank","undefined","engine","commandModule","id","push","data","name","user","celest_body","bodyLocation","locationStatus","saveShipRes","method","url","status","alert","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios'\r\nimport {saveShip} from './../../utils/saveShip'\r\nexport default class SaveShip extends Component {\r\n\r\n    saveShip = async (e) => {\r\n        e.preventDefault();\r\n        const stage = this.props.stage\r\n        let partList = []\r\n\r\n        for(let i = 0; i < stage.length; i ++){\r\n            let currentStage = i \r\n            let tankList = []\r\n            let engineList = []\r\n            let commandModuleList = []\r\n            if(stage[currentStage].tank !== undefined || stage[currentStage].engine !== undefined || stage[currentStage].commandModule !== undefined){\r\n                for(let i = 0; i < stage[currentStage].tank.length; i ++) {\r\n                    if(stage[currentStage].tank[i] !== undefined){\r\n                        let id = stage[currentStage].tank[i].id\r\n                        tankList.push({tank:{id: id}})\r\n                    }\r\n                }\r\n                for(let i = 0; i < stage[currentStage].engine.length; i ++) {\r\n                    if(stage[currentStage].engine[i] !== undefined){\r\n                        let id = stage[currentStage].engine[i].id\r\n                        engineList.push({engine:{id: id}})\r\n                    }\r\n                }\r\n                for(let i = 0; i < stage[currentStage].commandModule.length; i ++) {\r\n                    if(stage[currentStage].commandModule[i] !== undefined){\r\n                        let id = stage[currentStage].commandModule[i].id\r\n                        commandModuleList.push({tank:{id: id}})\r\n                    }\r\n                }\r\n                currentStage ++\r\n                partList.push({\r\n                    tank: tankList,\r\n                    engine: engineList,\r\n                    commandModule: commandModuleList\r\n                })\r\n            }\r\n        }\r\n\r\n        const data = {\r\n            name: this.props.name,\r\n            user: {\r\n                id: 1\r\n            },\r\n            stage: partList,\r\n            celest_body: {\r\n                id: this.props.bodyLocation\r\n            },\r\n            locationStatus: this.props.locationStatus\r\n        }\r\n\r\n        const saveShipRes = await axios({\r\n            method: 'POST',\r\n            url: 'http://localhost:1337/ships',\r\n            data\r\n        })\r\n        if (saveShipRes.status === 200) {\r\n            alert('200');\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <button onClick={() => saveShip(this.props.stage, this.props.name,  this.props.locationStatus, this.props.bodyLocation)}> Save </button> \r\n        );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}