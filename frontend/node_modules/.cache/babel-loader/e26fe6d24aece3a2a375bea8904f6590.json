{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\doubl\\\\Documents\\\\Projets\\\\Try\\\\rocketbuilder\\\\frontend\\\\src\\\\components\\\\controls\\\\ShipControl.js\";\nimport React, { Component } from 'react';\nimport { ShipContext } from '../../contexts/ShipProvider';\nimport axios from 'axios';\nexport default class ShipControl extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      ship: null,\n      stage: null\n    };\n  }\n\n  async componentDidMount() {\n    try {\n      const shiptRes = await axios({\n        method: 'GET',\n        url: `http://localhost:1337/ships/${this.props.location.id}`\n      });\n      const fetchedShip = shiptRes.data;\n      let rocketStages = [];\n\n      for (let i = 0; i < fetchedShip.stage.length; i++) {\n        let stage = {\n          commandModule: [],\n          engine: [],\n          tank: []\n        };\n        let currentStage = i;\n\n        for (let i = 0; i < fetchedShip.stage[currentStage].tank.length; i++) {\n          stage.tank.push(fetchedShip.stage[currentStage].tank[i].tank);\n        }\n\n        for (let i = 0; i < fetchedShip.stage[currentStage].engine.length; i++) {\n          stage.engine.push(fetchedShip.stage[currentStage].engine[i].engine);\n        }\n\n        for (let i = 0; i < fetchedShip.stage[currentStage].commandModule.length; i++) {\n          stage.commandModule.push(fetchedShip.stage[currentStage].commandModule[i].commandModule);\n        }\n\n        currentStage++;\n        rocketStages.push(stage);\n      }\n\n      console.log('rocketStages', rocketStages);\n      this.setState({\n        stage: rocketStages\n      }, () => {\n        this.context.shipSetStage(rocketStages);\n      });\n      console.log('fetchedShip', fetchedShip);\n    } catch (err) {\n      alert(err);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ShipControl\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 13\n      }\n    }, \"ShipControl\", this.state.rocketStages);\n  }\n\n}\nShipControl.contextType = ShipContext;","map":{"version":3,"sources":["C:/Users/doubl/Documents/Projets/Try/rocketbuilder/frontend/src/components/controls/ShipControl.js"],"names":["React","Component","ShipContext","axios","ShipControl","state","ship","stage","componentDidMount","shiptRes","method","url","props","location","id","fetchedShip","data","rocketStages","i","length","commandModule","engine","tank","currentStage","push","console","log","setState","context","shipSetStage","err","alert","render","contextType"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,WAAT,QAA4B,6BAA5B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAGA,eAAe,MAAMC,WAAN,SAA0BH,SAA1B,CAAoC;AAAA;AAAA;AAAA,SAC/CI,KAD+C,GACxC;AACHC,MAAAA,IAAI,EAAE,IADH;AAEHC,MAAAA,KAAK,EAAE;AAFJ,KADwC;AAAA;;AAM/C,QAAMC,iBAAN,GAA0B;AACtB,QAAI;AACA,YAAMC,QAAQ,GAAG,MAAMN,KAAK,CAAC;AACzBO,QAAAA,MAAM,EAAE,KADiB;AAEzBC,QAAAA,GAAG,EAAG,+BAA8B,KAAKC,KAAL,CAAWC,QAAX,CAAoBC,EAAG;AAFlC,OAAD,CAA5B;AAIA,YAAMC,WAAW,GAAGN,QAAQ,CAACO,IAA7B;AACA,UAAIC,YAAY,GAAG,EAAnB;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,WAAW,CAACR,KAAZ,CAAkBY,MAAtC,EAA8CD,CAAC,EAA/C,EAAmD;AAC/C,YAAIX,KAAK,GAAG;AACRa,UAAAA,aAAa,EAAE,EADP;AAERC,UAAAA,MAAM,EAAE,EAFA;AAGRC,UAAAA,IAAI,EAAE;AAHE,SAAZ;AAKA,YAAIC,YAAY,GAAGL,CAAnB;;AACA,aAAK,IAAIA,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,WAAW,CAACR,KAAZ,CAAkBgB,YAAlB,EAAgCD,IAAhC,CAAqCH,MAAzD,EAAiED,CAAC,EAAlE,EAAsE;AAClEX,UAAAA,KAAK,CAACe,IAAN,CAAWE,IAAX,CAAgBT,WAAW,CAACR,KAAZ,CAAkBgB,YAAlB,EAAgCD,IAAhC,CAAqCJ,CAArC,EAAwCI,IAAxD;AACH;;AACD,aAAK,IAAIJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,WAAW,CAACR,KAAZ,CAAkBgB,YAAlB,EAAgCF,MAAhC,CAAuCF,MAA3D,EAAmED,CAAC,EAApE,EAAwE;AACpEX,UAAAA,KAAK,CAACc,MAAN,CAAaG,IAAb,CAAkBT,WAAW,CAACR,KAAZ,CAAkBgB,YAAlB,EAAgCF,MAAhC,CAAuCH,CAAvC,EAA0CG,MAA5D;AACH;;AACD,aAAK,IAAIH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,WAAW,CAACR,KAAZ,CAAkBgB,YAAlB,EAAgCH,aAAhC,CAA8CD,MAAlE,EAA0ED,CAAC,EAA3E,EAA+E;AAC3EX,UAAAA,KAAK,CAACa,aAAN,CAAoBI,IAApB,CAAyBT,WAAW,CAACR,KAAZ,CAAkBgB,YAAlB,EAAgCH,aAAhC,CAA8CF,CAA9C,EAAiDE,aAA1E;AACH;;AACDG,QAAAA,YAAY;AACZN,QAAAA,YAAY,CAACO,IAAb,CAAkBjB,KAAlB;AACH;;AACDkB,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BT,YAA5B;AACA,WAAKU,QAAL,CAAc;AAAEpB,QAAAA,KAAK,EAAEU;AAAT,OAAd,EAAuC,MAAM;AACzC,aAAKW,OAAL,CAAaC,YAAb,CAA0BZ,YAA1B;AACH,OAFD;AAGAQ,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BX,WAA3B;AACH,KA/BD,CA+BE,OAAOe,GAAP,EAAW;AACTC,MAAAA,KAAK,CAACD,GAAD,CAAL;AACH;AACJ;;AAEDE,EAAAA,MAAM,GAAG;AACL,wBACI;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAEK,KAAK3B,KAAL,CAAWY,YAFhB,CADJ;AAMH;;AAlD8C;AAqDnDb,WAAW,CAAC6B,WAAZ,GAA0B/B,WAA1B","sourcesContent":["import React, { Component } from 'react';\r\nimport { ShipContext } from '../../contexts/ShipProvider'\r\nimport axios from 'axios';\r\n\r\n\r\nexport default class ShipControl extends Component {\r\n    state ={\r\n        ship: null,\r\n        stage: null,\r\n    }\r\n\r\n    async componentDidMount() {\r\n        try {\r\n            const shiptRes = await axios({\r\n                method: 'GET',\r\n                url: `http://localhost:1337/ships/${this.props.location.id}`\r\n            });\r\n            const fetchedShip = shiptRes.data\r\n            let rocketStages = []\r\n            for (let i = 0; i < fetchedShip.stage.length; i++) {\r\n                let stage = {\r\n                    commandModule: [],\r\n                    engine: [],\r\n                    tank: [],\r\n                }\r\n                let currentStage = i\r\n                for (let i = 0; i < fetchedShip.stage[currentStage].tank.length; i++) {\r\n                    stage.tank.push(fetchedShip.stage[currentStage].tank[i].tank)\r\n                }\r\n                for (let i = 0; i < fetchedShip.stage[currentStage].engine.length; i++) {\r\n                    stage.engine.push(fetchedShip.stage[currentStage].engine[i].engine)\r\n                }\r\n                for (let i = 0; i < fetchedShip.stage[currentStage].commandModule.length; i++) {\r\n                    stage.commandModule.push(fetchedShip.stage[currentStage].commandModule[i].commandModule)\r\n                }\r\n                currentStage++\r\n                rocketStages.push(stage)\r\n            }\r\n            console.log('rocketStages', rocketStages);\r\n            this.setState({ stage: rocketStages }, () => {\r\n                this.context.shipSetStage(rocketStages)\r\n            })\r\n            console.log('fetchedShip', fetchedShip)\r\n        } catch (err){\r\n            alert(err);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"ShipControl\">\r\n                ShipControl\r\n                {this.state.rocketStages}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nShipControl.contextType = ShipContext;\r\n"]},"metadata":{},"sourceType":"module"}