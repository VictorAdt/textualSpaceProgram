{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\doubl\\\\Documents\\\\Projets\\\\Try\\\\rocketBuilder\\\\frontend\\\\src\\\\components\\\\controls\\\\ShipControl.js\";\nimport React, { Component } from 'react';\nimport { ShipContext } from '../../contexts/ShipProvider';\nimport axios from 'axios';\nexport default class ShipControl extends Component {\n  async componentDidMount() {\n    const shipId = this.props.location.id;\n    const shiptRes = await axios({\n      method: 'GET',\n      url: `http://localhost:1337/ships/${shipId}`\n    });\n    const fetchedShip = shiptRes.data;\n    let rocketStages = [];\n\n    for (let i = 0; i < fetchedShip.stage.length; i++) {\n      let stage = {\n        commandModule: [],\n        engine: [],\n        tank: []\n      };\n      let currentStage = i;\n\n      for (let i = 0; i < fetchedShip.stage[currentStage].tank.length; i++) {\n        stage.tank.push(fetchedShip.stage[currentStage].tank[i].tank);\n      }\n\n      for (let i = 0; i < fetchedShip.stage[currentStage].engine.length; i++) {\n        stage.engine.push(fetchedShip.stage[currentStage].engine[i].engine);\n      }\n\n      for (let i = 0; i < fetchedShip.stage[currentStage].commandModule.length; i++) {\n        stage.commandModule.push(fetchedShip.stage[currentStage].commandModule[i].commandModule);\n      }\n\n      currentStage++;\n      rocketStages.push(stage);\n    }\n\n    console.log('rocketStages', rocketStages);\n    this.setState({\n      stage: rocketStages\n    }, () => {\n      this.context.shipSetStage(rocketStages);\n    });\n    console.log('fetchedShip', fetchedShip);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ShipControl\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 13\n      }\n    }, \"ShipControl\");\n  }\n\n}\nShipControl.contextType = ShipContext;","map":{"version":3,"sources":["C:/Users/doubl/Documents/Projets/Try/rocketBuilder/frontend/src/components/controls/ShipControl.js"],"names":["React","Component","ShipContext","axios","ShipControl","componentDidMount","shipId","props","location","id","shiptRes","method","url","fetchedShip","data","rocketStages","i","stage","length","commandModule","engine","tank","currentStage","push","console","log","setState","context","shipSetStage","render","contextType"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,WAAT,QAA4B,6BAA5B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAGA,eAAe,MAAMC,WAAN,SAA0BH,SAA1B,CAAoC;AAE/C,QAAMI,iBAAN,GAA0B;AACtB,UAAMC,MAAM,GAAG,KAAKC,KAAL,CAAWC,QAAX,CAAoBC,EAAnC;AACA,UAAMC,QAAQ,GAAG,MAAMP,KAAK,CAAC;AACzBQ,MAAAA,MAAM,EAAE,KADiB;AAEzBC,MAAAA,GAAG,EAAG,+BAA8BN,MAAO;AAFlB,KAAD,CAA5B;AAKA,UAAMO,WAAW,GAAGH,QAAQ,CAACI,IAA7B;AACA,QAAIC,YAAY,GAAG,EAAnB;;AAEA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,WAAW,CAACI,KAAZ,CAAkBC,MAAtC,EAA8CF,CAAC,EAA/C,EAAmD;AAC/C,UAAIC,KAAK,GAAI;AACTE,QAAAA,aAAa,EAAE,EADN;AAETC,QAAAA,MAAM,EAAE,EAFC;AAGTC,QAAAA,IAAI,EAAE;AAHG,OAAb;AAKA,UAAIC,YAAY,GAAGN,CAAnB;;AACA,WAAK,IAAIA,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,WAAW,CAACI,KAAZ,CAAkBK,YAAlB,EAAgCD,IAAhC,CAAqCH,MAAzD,EAAiEF,CAAC,EAAlE,EAAsE;AAClEC,QAAAA,KAAK,CAACI,IAAN,CAAWE,IAAX,CAAgBV,WAAW,CAACI,KAAZ,CAAkBK,YAAlB,EAAgCD,IAAhC,CAAqCL,CAArC,EAAwCK,IAAxD;AACH;;AACD,WAAK,IAAIL,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,WAAW,CAACI,KAAZ,CAAkBK,YAAlB,EAAgCF,MAAhC,CAAuCF,MAA3D,EAAmEF,CAAC,EAApE,EAAwE;AACpEC,QAAAA,KAAK,CAACG,MAAN,CAAaG,IAAb,CAAkBV,WAAW,CAACI,KAAZ,CAAkBK,YAAlB,EAAgCF,MAAhC,CAAuCJ,CAAvC,EAA0CI,MAA5D;AACH;;AACD,WAAK,IAAIJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,WAAW,CAACI,KAAZ,CAAkBK,YAAlB,EAAgCH,aAAhC,CAA8CD,MAAlE,EAA0EF,CAAC,EAA3E,EAA+E;AAC3EC,QAAAA,KAAK,CAACE,aAAN,CAAoBI,IAApB,CAAyBV,WAAW,CAACI,KAAZ,CAAkBK,YAAlB,EAAgCH,aAAhC,CAA8CH,CAA9C,EAAiDG,aAA1E;AACH;;AACDG,MAAAA,YAAY;AACZP,MAAAA,YAAY,CAACQ,IAAb,CAAkBN,KAAlB;AACH;;AACDO,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BV,YAA5B;AACA,SAAKW,QAAL,CAAc;AAAET,MAAAA,KAAK,EAAEF;AAAT,KAAd,EAAuC,MAAM;AACzC,WAAKY,OAAL,CAAaC,YAAb,CAA0Bb,YAA1B;AACH,KAFD;AAGAS,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BZ,WAA3B;AACH;;AAEDgB,EAAAA,MAAM,GAAG;AACL,wBACI;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADJ;AAKH;;AA5C8C;AA+CnDzB,WAAW,CAAC0B,WAAZ,GAA0B5B,WAA1B","sourcesContent":["import React, { Component } from 'react';\r\nimport { ShipContext } from '../../contexts/ShipProvider'\r\nimport axios from 'axios';\r\n\r\n\r\nexport default class ShipControl extends Component {\r\n\r\n    async componentDidMount() {\r\n        const shipId = this.props.location.id \r\n        const shiptRes = await axios({\r\n            method: 'GET',\r\n            url: `http://localhost:1337/ships/${shipId}`\r\n        });\r\n\r\n        const fetchedShip = shiptRes.data\r\n        let rocketStages = []\r\n\r\n        for (let i = 0; i < fetchedShip.stage.length; i++) {\r\n            let stage =  {\r\n                commandModule: [],\r\n                engine: [],\r\n                tank: [],\r\n            }\r\n            let currentStage = i\r\n            for (let i = 0; i < fetchedShip.stage[currentStage].tank.length; i++) {\r\n                stage.tank.push(fetchedShip.stage[currentStage].tank[i].tank)\r\n            }\r\n            for (let i = 0; i < fetchedShip.stage[currentStage].engine.length; i++) {\r\n                stage.engine.push(fetchedShip.stage[currentStage].engine[i].engine)\r\n            }\r\n            for (let i = 0; i < fetchedShip.stage[currentStage].commandModule.length; i++) {\r\n                stage.commandModule.push(fetchedShip.stage[currentStage].commandModule[i].commandModule)\r\n            }\r\n            currentStage++\r\n            rocketStages.push(stage)\r\n        }\r\n        console.log('rocketStages', rocketStages );\r\n        this.setState({ stage: rocketStages }, () => {\r\n            this.context.shipSetStage(rocketStages)\r\n        })\r\n        console.log('fetchedShip', fetchedShip)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"ShipControl\">\r\n                ShipControl\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nShipControl.contextType = ShipContext;\r\n"]},"metadata":{},"sourceType":"module"}